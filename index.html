<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PANACEA PRIME — Enhanced</title>
  <style>
    /* ---- Base layout ---- */
    :root{--bg:#07080b;--panel:#0f1720;--accent:#39ffca;--muted:#95a0b3;--danger:#ff4d6d}
    *{box-sizing:border-box}html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial}
    body{background:radial-gradient(1200px 600px at 10% 10%, rgba(10,14,22,0.6), transparent),linear-gradient(180deg,#04101a 0%, #060612 40%),var(--bg);color:#e6eef6}
    .wrap{max-width:1100px;margin:28px auto;padding:22px;display:grid;grid-template-columns:1fr 420px;gap:20px}
    header{display:flex;align-items:center;gap:14px}
    .logo{font-weight:700;letter-spacing:1px}
    .logo .mark{color:var(--accent);font-family:monospace}
    .panel{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:16px;box-shadow:0 8px 30px rgba(2,6,12,0.7);border:1px solid rgba(255,255,255,0.03)}

    /* ---- Left (main console) ---- */
    .console{min-height:540px;padding:18px;display:flex;flex-direction:column;gap:12px}
    .status-row{display:flex;align-items:center;gap:12px}
    .status-dot{width:12px;height:12px;border-radius:50%}
    .status-online{background:linear-gradient(180deg,#36f0b2,#00b388);box-shadow:0 0 14px rgba(57,255,202,0.12)}
    .meta{color:var(--muted);font-size:13px}

    .terminal{background:#04060a;border-radius:8px;padding:14px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;color:#a6f7e0;min-height:360px;overflow:hidden;position:relative}
    .terminal .stream{height:100%;overflow:auto;padding-right:8px}
    .line{white-space:pre-wrap;font-size:13px;line-height:1.45}
    .muted{color:rgba(166,247,224,0.55)}

    /* progress */
    .progress-wrap{display:flex;align-items:center;gap:10px}
    .progress{height:12px;background:rgba(255,255,255,0.03);border-radius:8px;flex:1;overflow:hidden}
    .bar{height:100%;width:0%;background:linear-gradient(90deg,#00ffcc,#7affd9);box-shadow:0 6px 18px rgba(0,255,204,0.04)}

    /* Right sidebar */
    .sidebar{display:flex;flex-direction:column;gap:12px}
    .input-row{display:flex;gap:8px}
    input[type=text]{flex:1;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit;font-family:inherit}
    button{padding:10px 12px;border-radius:8px;border:0;background:linear-gradient(180deg,#0fffcf 0%,#17cba7 100%);cursor:pointer;color:#021;font-weight:600}
    .btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);font-weight:600}

    /* modules */
    .module{padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.02);background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent)}
    .module h4{margin:0 0 8px 0}
    .sample-list{display:flex;flex-wrap:wrap;gap:8px}
    .chip{padding:6px 9px;border-radius:999px;background:rgba(255,255,255,0.02);cursor:pointer;font-size:13px}

    /* modal */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:linear-gradient(180deg,rgba(0,0,0,0.5),rgba(0,0,0,0.7))}
    .modal.show{display:flex}
    .modal-card{width:680px;background:linear-gradient(180deg,#081018,#051019);border-radius:12px;padding:18px;border:1px solid rgba(255,255,255,0.04)}

    /* small screens */
    @media(max-width:980px){.wrap{grid-template-columns:1fr;}.sidebar{order:2}}

    /* ---- cinematic & glitch accents ---- */
    .glitch{position:relative}
    .glitch::before,.glitch::after{content:"";position:absolute;inset:0;border-radius:8px;mix-blend-mode:screen;opacity:0.06;pointer-events:none}
    .glitch::before{transform:translate(2px,-2px);background:linear-gradient(90deg,#39ffca,#7bf1ff)}
    .glitch::after{transform:translate(-2px,2px);background:linear-gradient(90deg,#ff83a6,#fffb85)}
    .flicker{animation:flicker 6s linear infinite}
    @keyframes flicker{0%,97%{opacity:1}98%{opacity:.5}99%{opacity:.95}}

    /* tiny terminal cursor */
    .cursor{display:inline-block;width:8px;height:14px;background:var(--accent);margin-left:6px;vertical-align:middle;animation:blink 1s steps(2) infinite}
    @keyframes blink{50%{opacity:0}}

  </style>
</head>
<body>
  <div class="wrap">
    <main class="panel console">
      <header>
        <div class="logo"><span class="mark">PANACEA</span> PRIME — <small class="muted">Artificial Intelligence Cure Matrix</small></div>
        <div style="margin-left:auto;text-align:right" class="meta">V.9.0.2 <span style="opacity:.6">|</span> QUANTUM STABLE</div>
      </header>

      <div class="status-row">
        <div class="status-dot status-online"></div>
        <div>
          <div><strong>System Status: ONLINE</strong></div>
          <div class="meta">Latency: <span id="latency">12ms</span> — Scenarios simulated: <span id="scenarios">14,000,605</span></div>
        </div>
      </div>

      <section class="panel terminal glitch flicker" id="terminal">
        <div class="stream" id="stream" aria-live="polite"></div>
      </section>

      <div class="progress-wrap">
        <div class="meta">Simulation Progress</div>
        <div class="progress" aria-hidden><div class="bar" id="bar"></div></div>
        <div style="width:120px;text-align:right" class="meta" id="progressText">0%</div>
      </div>

      <div style="display:flex;gap:10px;align-items:center">
        <button class="btn-ghost" id="btnLore">IN-UNIVERSE LORE</button>
        <button class="btn-ghost" id="btnModules">MODULES</button>
        <div style="margin-left:auto" class="meta">Clearance: <strong>HELIO‑7</strong></div>
      </div>

    </main>

    <aside class="panel sidebar">
      <div class="module">
        <h4>Target Input</h4>
        <div class="input-row">
          <input id="affInput" type="text" placeholder="Enter affliction ID (eg. VX-94)" aria-label="Affliction ID">
          <button id="runBtn">ANALYZE</button>
        </div>
        <div style="margin-top:8px;font-size:13px;color:var(--muted)">No real-world medical claims. This is fictional simulation content.</div>
      </div>

      <div class="module">
        <h4>Sample Afflictions</h4>
        <div class="sample-list" id="samples"></div>
      </div>

      <div class="module">
        <h4>Quick Controls</h4>
        <div style="display:flex;gap:8px"><button id="btnRandom" class="btn-ghost">RANDOM RUN</button><button id="btnBreach" class="btn-ghost">SIMULATE BREACH</button></div>
      </div>

      <div class="module">
        <h4>Modules</h4>
        <div style="display:flex;flex-direction:column;gap:8px">
          <div class="chip" id="mDiag">Diagnostics</div>
          <div class="chip" id="mSynth">Synthesis</div>
          <div class="chip" id="mContain">Containment</div>
        </div>
      </div>

    </aside>
  </div>

  <div class="modal" id="modalLore" role="dialog" aria-modal="true">
    <div class="modal-card">
      <h3>PANACEA PRIME — DIEGETIC DOSSIER</h3>
      <p class="muted">Class‑VII Autonomous Biomedical Cognitive Engine — Declassified briefing (redacted)</p>
      <div style="display:grid;grid-template-columns:1fr 200px;gap:12px;margin-top:12px">
        <div>
          <p><strong>Operator Notes:</strong> PANACEA PRIME was developed under Project Helios to model emergent synthetic pathologies and propose theoretical remediation pathways. All outputs are fictional.</p>
          <p><em>Directive 12‑A:</em> Under no circumstances shall PANACEA PRIME be used to make real clinical decisions without rigorous validation.</p>
        </div>
        <div>
          <ul class="meta" style="margin:0;padding-left:18px">
            <li>Established: 2091</li>
            <li>Lead AI: ARGOS‑7</li>
            <li>Clearance: HELIO‑7+</li>
          </ul>
        </div>
      </div>
      <div style="margin-top:12px;text-align:right"><button id="closeLore" class="btn-ghost">CLOSE</button></div>
    </div>
  </div>

  <script>
    // ------------------ Fictional afflictions DB ------------------
    const AFFLICTIONS = [
      {id:'VX-94', name:'Synthetic Neuro-Disruptor Virus', severity:'Critical', key:'GAMMA-3X'},
      {id:'OBL-3', name:'Obsidian Bone Lattice Syndrome', severity:'High', key:'OBLX/77'},
      {id:'EKO-N1', name:'Quantum Echo Parasitic Loop', severity:'High', key:'EKO::N1'},
      {id:'SYN-0', name:'Synaptic Null Collapse', severity:'Medium', key:'SYN0-NA'},
      {id:'PLASM-A', name:'Plasmatic Drift Affliction', severity:'Low', key:'PLSMA-A'},
      {id:'NEX-11', name:'Nexis Protein Misfold', severity:'Medium', key:'NEX11-AL'},
      {id:'TH-DELTA', name:'Thermal Delamination Syndrome', severity:'Low', key:'THD-12'},
      {id:'ARC-4', name:'Arcogenic Cellular Fuse', severity:'High', key:'ARC-4Z'},
      {id:'LUC-9', name:'Lucent Membrane Erosion', severity:'Critical', key:'L9-ME'},
      {id:'QX-VOID', name:'Quantum Void Residue', severity:'Unknown', key:'QX-VOID'},
      {id:'Z-ORBIT', name:'Zero-Orbit Viral Spiral', severity:'High', key:'ZORB/9'},
      {id:'HYDRA-02', name:'Hydra Polymorphic Syndrome', severity:'Medium', key:'HYD02'},
      {id:'MIR-7', name:'Mirror-Phase Contagion', severity:'Critical', key:'MIR7-REF'},
      {id:'IONIC', name:'Ionic Cascade Decay', severity:'Medium', key:'ION-CASCADE'},
      {id:'PRSM-5', name:'Prismogenic Replicant Malady', severity:'Low', key:'PR5'},
    ];

    // DOM refs
    const stream = document.getElementById('stream');
    const bar = document.getElementById('bar');
    const progressText = document.getElementById('progressText');
    const scenariosEl = document.getElementById('scenarios');
    const latEl = document.getElementById('latency');
    const affInput = document.getElementById('affInput');
    const runBtn = document.getElementById('runBtn');
    const samples = document.getElementById('samples');
    const btnRandom = document.getElementById('btnRandom');
    const btnBreach = document.getElementById('btnBreach');
    const modalLore = document.getElementById('modalLore');
    const btnLore = document.getElementById('btnLore');
    const closeLore = document.getElementById('closeLore');
    const btnModules = document.getElementById('btnModules');

    // populate sample chips
    AFFLICTIONS.forEach(a=>{
      const el = document.createElement('div'); el.className='chip'; el.textContent=a.id; el.title=a.name;
      el.addEventListener('click', ()=>{affInput.value=a.id; runAnalysis(a.id)});
      samples.appendChild(el);
    });

    // Utility: append line with optional delay
    function appendLine(text, cls){
      const node = document.createElement('div'); node.className='line '+(cls||''); node.textContent = text; stream.appendChild(node); stream.scrollTop = stream.scrollHeight; return node;
    }

    function randomInt(max){return Math.floor(Math.random()*max)}

    // Fake progress simulation
    async function fakeProgress(duration = 2500, onUpdate){
      const start = performance.now();
      return new Promise(resolve=>{
        function tick(now){
          const t = Math.min(1,(now-start)/duration);
          const eased = Math.pow(t,0.7);
          const pct = Math.floor(eased*100);
          bar.style.width = pct + '%';
          progressText.textContent = pct + '%';
          if(onUpdate) onUpdate(pct);
          if(t<1) requestAnimationFrame(tick); else resolve();
        }
        requestAnimationFrame(tick);
      })
    }

    // Main analysis flow
    async function runAnalysis(target){
      // clear small bits
      appendLine('INPUT: ' + target, 'muted');
      // simulate variable latency
      const latency = 8 + randomInt(60);
      latEl.textContent = latency + 'ms';

      // scenario bump
      const current = Number(scenariosEl.textContent.replace(/,/g,'')) || 14000605;
      scenariosEl.textContent = (current + randomInt(300)+10).toLocaleString();

      // begin log
      appendLine('\n[INITIALIZING MODULES] — Loading vectorizers, molecular lattice map, cross-reference index.');
      await fakeProgress(1100);
      appendLine('[STATUS] Neural vector cores: ONLINE');
      await new Promise(r=>setTimeout(r,220));

      // analyze pattern
      appendLine('[ANALYZER] Parsing Affliction ID...');
      await fakeProgress(900);

      // find affliction
      const found = AFFLICTIONS.find(a=>a.id.toLowerCase()===target.toLowerCase());
      if(!found){
        // unknown path: randomized creative output
        appendLine('\n[RESULT] Affliction not catalogued. Generating hypothetical model...');
        await fakeProgress(1200);
        const seed = Math.random().toString(36).slice(2,8).toUpperCase();
        appendLine('HYPOTHETICAL PATHWAY ID: ' + seed);
        appendLine('MOLECULAR KEY: ' + (['PR-','GX-','QX-','AL-'][randomInt(4)]) + randomInt(9999));
        appendLine('\nSuggested containment: ' + (['ISOLATE SECTOR','SYNTHETIC STABILIZATION','PHASED DISPLACEMENT'][randomInt(3)]));
        appendLine('\n[NOTE] This result is a simulation. No clinical validity.');
        await new Promise(r=>setTimeout(r,300));
        bar.style.width = '100%'; progressText.textContent='100%';
        return;
      }

      // if found, produce rich diegetic output
      appendLine('\n[AFFLICTION] ' + found.id + ' — ' + found.name);
      appendLine('[SEVERITY] ' + found.severity + ' — Cross-reference: ' + (Math.random()>0.6? 'ARCHIVE MATCH: ' + AFFLICTIONS[randomInt(AFFLICTIONS.length)].id : 'NO DIRECT MATCH'));
      await fakeProgress(1400, pct=>{
        // mid-run streaming facts
        if(pct>25 && pct<35 && !document.getElementById('fact1')){
          const n = appendLine('[STREAM] Cross-linking protein topologies...'); n.id='fact1';
        }
        if(pct>60 && pct<70 && !document.getElementById('fact2')){
          const n = appendLine('[STREAM] Computing entropic correction factors...'); n.id='fact2';
        }
      });

      // present molecular key + cure path (fictional)
      const keys = ['GEN-','CYT-','MOX-','HEX-'];
      const mk = keys[randomInt(keys.length)] + Math.random().toString(36).slice(2,6).toUpperCase();
      appendLine('\n[OPTIMAL PATH FOUND] — MOLECULAR KEY: ' + mk);
      appendLine('[SYNTHESIS] Construct composite agent using:');
      appendLine('  - Lattice scaffold: ' + (['ALPHA','OMEGA','SIGMA'][randomInt(3)]));
      appendLine('  - Reactive tag: ' + (['Hydroxyl','Amino','Phasic'][randomInt(3)]));
      appendLine('  - Temporal vector: T+'+ (10 + randomInt(400)) +'ms');

      // optional animated success
      await fakeProgress(800);
      appendLine('\n[CONTAINMENT] Recommended: ' + (found.severity==='Critical' ? 'Immediate global quarantine; deploy synthesis units.' : 'Local isolation; deploy adaptive synthesis.' ));
      appendLine('\n[REPORT] Delivery packet: PANACEA::' + mk + ' (encrypted)');
      appendLine('\n[NOTE] Simulation complete. All signatures logged.');

      bar.style.width = '100%'; progressText.textContent='100%';
    }

    // Bind UI
    runBtn.addEventListener('click', ()=>{ const t = affInput.value.trim(); if(!t) { appendLine('[ERROR] No input supplied. Try a sample affliction ID.','muted'); return } ; stream.innerHTML=''; bar.style.width='0%'; progressText.textContent='0%'; runAnalysis(t); });
    btnRandom.addEventListener('click', ()=>{ const a = AFFLICTIONS[randomInt(AFFLICTIONS.length)]; affInput.value=a.id; stream.innerHTML=''; bar.style.width='0%'; progressText.textContent='0%'; runAnalysis(a.id); });

    btnBreach.addEventListener('click', ()=>{
      stream.innerHTML=''; appendLine('[ALERT] Unauthorized signature detected — SIMULATED BREACH MODE');
      appendLine('[SECURITY] Initiating lockdown...');
      // cinematic breach
      let steps = ['Firing countermeasures','Rerouting containment corridors','Shredding non-essential indexes','Wiping volatile caches'];
      (async ()=>{
        for(let s of steps){ appendLine('[BREACH] ' + s); await fakeProgress(700); }
        appendLine('[SYSTEM] Containment: REESTABLISHED');
        bar.style.width='100%'; progressText.textContent='100%';
      })();
    });

    // modal lore
    btnLore.addEventListener('click', ()=>{modalLore.classList.add('show')});
    closeLore.addEventListener('click', ()=>{modalLore.classList.remove('show')});

    // modules toggle (simple)
    document.getElementById('mDiag').addEventListener('click', ()=>{ appendLine('[MODULE] Diagnostics engaged — Live telemetry streaming...'); });
    document.getElementById('mSynth').addEventListener('click', ()=>{ appendLine('[MODULE] Synthesis queued — Simulating molecular assembly...'); });
    document.getElementById('mContain').addEventListener('click', ()=>{ appendLine('[MODULE] Containment protocols active — Pressure valves nominal'); });

    // small accessibility niceties
    affInput.addEventListener('keydown', e=>{ if(e.key==='Enter'){ runBtn.click(); } });

    // initial welcome
    (async ()=>{
      appendLine('PANACEA PRIME — Boot sequence complete.');
      appendLine('[NOTICE] This interface is fictional—no medical claims implied.');
      appendLine('\nAwaiting target input...');
    })();

    // keyboard easter: press M to trigger modules modal
    window.addEventListener('keydown', e=>{ if(e.key.toLowerCase()==='m'){ document.getElementById('mDiag').click(); }});

  </script>
</body>
</html>
